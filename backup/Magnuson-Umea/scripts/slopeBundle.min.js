function detectmob(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!1:!0}function optionsCreation(n){var t=n.split(","),r=t[0],i=t[1];switch(i){case"1":scene.activeCamera.spinTo("beta",6*Math.PI/16,50);scene.activeCamera.spinTo("alpha",.4*Math.PI,50);scene.activeCamera.spinTo("radius",250,50);scene.activeCamera.spinTo("tarjet.x",(nReceptacles-1)*-receptacleWidth/2,50);break;case"2":scene.activeCamera.spinTo("beta",6*Math.PI/16,50);scene.activeCamera.spinTo("alpha",.4*Math.PI,50);scene.activeCamera.spinTo("radius",250,50);scene.activeCamera.spinTo("tarjet.x",(nReceptacles-1)*-receptacleWidth/2,50);break;case"3":scene.activeCamera.spinTo("beta",.83,80);scene.activeCamera.spinTo("alpha",Math.PI/2,80);scene.activeCamera.spinTo("radius",170,50);scene.activeCamera.spinTo("tarjet.x",(nReceptacles-1)*-receptacleWidth/2,50);break;case"4":scene.activeCamera.spinTo("beta",.83,80);scene.activeCamera.spinTo("alpha",Math.PI/2,80);scene.activeCamera.spinTo("radius",170,50);scene.activeCamera.spinTo("tarjet.x",(nReceptacles-1)*-receptacleWidth/2,50)}$("#optionsDescription").empty();$("#optionsList").empty();$("#optionsCheckbox").empty();$("#receptacleChoice").empty();nFeature=0;featuresData.map(function(n){var c,l,t,r,f,a,e,o,s,u,h,v;if(n.Id==i){if(n.Id==1&&nReceptacles==4?$("#summaryCarousel").carousel({interval:5e3}):n.Id<1&&nReceptacles==4&&$("#summaryCarousel").carousel({interval:0}),nFeature++,nFeature==1&&n.Code!="quantity")if(n.Code.includes("label")){for(t=0;t<nReceptacles;t++)modelList[t].PartNumberShort.includes("DBL")?(r=$("<div>",{"class":"col",id:"replicateColDivider"}),$("#receptacleChoice").append(r),c=$("<div>",{"class":"receptacleSelector",id:"replicatedOptionL"+t,text:"Unit "+(t+1)+" Left",onClick:`receptacleSelectorFunction("${t+1}", "${"Label_L"}")`}),l=$("<div>",{"class":"receptacleSelector",id:"replicatedOptionR"+t,text:"Unit "+(t+1)+" Right",onClick:`receptacleSelectorFunction("${t+1}", "${"Label_R"}")`}),r.append(c),r.append(l),receptacleSelectorFunction(index+1,"Label_L")):nReceptacles>1&&(r=$("<div>",{"class":"col",id:"replicateColDivider"}),$("#receptacleChoice").append(r),f=$("<div>",{"class":"receptacleSelector",id:"replicatedOption"+t,text:"Unit "+(t+1),onClick:`receptacleSelectorFunction("${t+1}", "${"Label_C"}")`}),r.append(f));modelList[index].PartNumberLong.split(",")[3].length==1?($(`#replicatedOption${index}`).css("background-color","rgb(150,150,150)"),receptacleSelectorFunction(index+1,"Label_C")):($(`#replicatedOptionL${index}`).css("background-color","rgb(150,150,150)"),receptacleSelectorFunction(index+1,"Label_L"))}else if(nReceptacles>1){for(t=0;t<nReceptacles;t++)r=$("<div>",{"class":"col",id:"replicateColDivider"}),$("#receptacleChoice").append(r),f=$("<div>",{"class":"receptacleSelector",id:"replicatedOption"+t,text:"Unit "+(t+1),onClick:`receptacleSelectorFunction("${t+1}", "${"Label_C"}")`}),r.append(f);$("#replicatedOption"+index).css("background-color","rgb(150,150,150)")}isUnique=!1;n.Description&&(a=$(`<div class="text">${n.Description}</div>`),$("#optionsDescription").append(a));e=$('<div class="options">');$("#optionsList").append(e);n.Code=="glides"||n.Code=="liner"?(o=$(`<div class="option" for="${n.Code}-option" style= "display: inline-flex;">`),e.append(o),s=$('<div class="image">'),o.append(s),u=$("<a>",{"class":"list-group-list list-group-item-action",id:"featureOption-"+n.Code}),n.Code=="glides"?u.attr("onClick",`glidesFunction()`):n.Code=="liner"&&u.attr("onClick",`linerFunction()`),s.append(u),n.Code=="liner"?modelList[index]&&(h=$(`<div class="wrapper"><input id="${n.Code}-option" type="checkbox" ${modelList[index].PartNumberShort.includes("1L")||modelList[index].PartNumberShort.includes("2L")?"checked":""}><label for="${n.Code}-option"></label></div>`)):h=$(`<div class="wrapper"><input id="${n.Code}-option" type="checkbox" ${partNumberLong[2]=="GL"?"checked":""}><label for="${n.Code}-option"></label></div>`),u.append(h),v=$(`<label for="${n.Code}-option" class="text" 
                style="align-self: center; padding-left: 15px; font-size: 12px; width: auto; margin:0; line-height: 15px;">${n.Label}</label>`),o.append(v)):n.Options.map(function(t){var r=$('<div class="option">'),u,i,f,o;e.append(r);u=$('<div class="image">');r.append(u);i=$("<a>",{"class":"list-group-list list-group-item-action",id:"featureOption-"+t.Code});t.hasOwnProperty("ColorCode")?i.attr("onClick",`changeColor("${n.Code}", "${t.Code}")`):t.hasOwnProperty("Material")?i.attr("onClick",`changeMaterial("${n.Code}", "${t.Code}")`):n.Code=="quantity"?i.attr("onClick",`changeQuantity("${t.Code}")`):i.attr("onClick",`changeGeometry("${n.Code}", "${t.Code}")`);u.append(i);f=$("<img>",{src:t.Thumbnail,border:"0",alt:"Slope","class":"fade-img"});i.append(f);o=$("<div>",{"class":"text",text:t.Label});r.append(o)})}})}function changeMaterial(n,t){slopeData.FeaturesData.map(function(i){i.Code==n&&i.Options.map(function(n){if(n.Active=!1,t==n.Code){n.Active=!0;n.hasOwnProperty("Material")&&modelList[index]._children[0]._children.map(function(t){i.Layers.includes(t._children[0].name.split(".")[3])&&(n.Material[0].AlbedoTexture&&(i.Code=="label"?(editSummary(i.Code,n.Label,n.Thumbnail,i.Layers[0]),t._children[0].material._albedoTexture.updateURL("/assets/materials/"+n.Code+"_Base_Color.png"),n.Code=="no-label"?i.Layers[0]=="Label_C"?($(`#label-colorCText${index+1}`).css("display","none"),$(`#label-colorCImage${index+1}`).css("display","none")):i.Layers[0]=="Label_R"?($(`#label-colorRText${index+1}`).css("display","none"),$(`#label-colorRImage${index+1}`).css("display","none")):i.Layers[0]=="Label_L"&&($(`#label-colorLText${index+1}`).css("display","none"),$(`#label-colorLImage${index+1}`).css("display","none")):i.Layers[0]=="Label_C"?($(`#label-colorCText${index+1}`).css("display","inline-block"),$(`#label-colorCImage${index+1}`).css("display","inline-block")):i.Layers[0]=="Label_R"?($(`#label-colorRText${index+1}`).css("display","inline-block"),$(`#label-colorRImage${index+1}`).css("display","inline-block")):i.Layers[0]=="Label_L"&&($(`#label-colorLText${index+1}`).css("display","inline-block"),$(`#label-colorLImage${index+1}`).css("display","inline-block"))):(editSummary(i.Code,n.Label,n.Thumbnail),t._children[0].material._albedoColor=new BABYLON.Color3.FromHexString("#FFFFFF"),t._children[0].material._albedoTexture.updateURL("/assets/materials/"+t._children[0].name.split(".")[3]+"_"+n.Code+"_Base_Color.png",scene),n.Code.includes("polishedSS")?(t._children[0].material.metallic=.8,t._children[0].material.roughness=.1,t._children[0].material.bumpTexture.level=.1):n.Code.includes("brushedSS")?(t._children[0].material.metallic=.6,t._children[0].material.roughness=.15,t._children[0].material.bumpTexture.level=.5):(t._children[0].material.metallic=.4,t._children[0].material.roughness=.13,t._children[0].material.bumpTexture.level=1))),n.Material[0].NormalTexture==!0?t._children[0].material._bumpTexture.updateURL("/assets/materials/"+t._children[0].name.split(".")[3]+"_"+n.Code+"_Normal.png"):n.Material[0].NormalTexture==!1&&(t._children[0].material._bumpTexture=null))});return}})})}function changeColor(n,t){slopeData.FeaturesData.map(function(i){i.Code==n&&i.Options.map(function(r){if(r.Active=!1,t==r.Code){editSummary(i.Code,r.Label,r.Thumbnail);r.Active=!0;t=="lunarWhite"&&n=="opening-color"&&changeColor("label-color","darkGreyVinyl");r.hasOwnProperty("ColorCode")&&(modelList[index].PartNumberShort&&(modelList[index].PartNumberShort,modelList[index].PartNumberLong=changePN(i.Code,r.PartNumber,null,index),modelList[index].PartNumberLong.split(",")[4]=="LW"&&modelList[index].PartNumberLong.split(",")[9]=="WV"?modelList[index]._children[0]._children.map(function(n){n._children[0].name.split(".")[3].includes("Label")&&(n._children[0].isVisible=!1)}):modelList[index].PartNumberLong.split(",")[3].length>1?modelList[index]._children[0]._children.map(function(n){(n._children[0].name.split(".")[3]=="Label_R"||n._children[0].name.split(".")[3]=="Label_L")&&(n._children[0].isVisible=!0)}):modelList[index].PartNumberLong.split(",")[3].length<=1&&modelList[index]._children[0]._children.map(function(n){n._children[0].name.split(".")[3].includes("Label_C")&&(n._children[0].isVisible=!0)})),modelList[index]._children[0]._children.map(function(n){i.Layers.includes(n._children[0].name.split(".")[3])&&(n._children[0].material.metallic=.4,n._children[0].material.roughness=.13,n._children[0].material.bumpTexture.level=1,(i.Code=="body-color"||i.Code=="opening-color")&&n._children[0].material._albedoTexture.updateURL("/assets/materials/White_Base_Color.png"),n._children[0].material._albedoColor=new BABYLON.Color3.FromHexString(r.ColorCode),n._children[0].material._bumpTexture.updateURL("/assets/materials/White_Normal.png"))}));return}})})}function changeGeometry(n,t){slopeData.FeaturesData.map(function(i){i.Code==n&&i.Options.map(function(n){if(n.Active=!1,t==n.Code){n.Active=!0;modelList[index].PartNumberShort;modelList[index].PartNumberLong=changePN(i.Code,n.PartNumber,null,index);editSummary(i.Code,n.Label,n.Thumbnail);n.hasOwnProperty("Layers")&&modelList[index]._children[0]._children.map(function(t){i.Layers.includes(t._children[0].name.split(".")[2])&&n.Layers.includes(t._children[0].name.split(".")[2])?t._children[0].isVisible=!0:modelList[index].PartNumberLong.split(",")[5]!="L"&&t._children[0].name.split(".")[2].includes("Liner")?t._children[0].isVisible=!1:i.Layers.includes(t._children[0].name.split(".")[2])?(t._children[0].isVisible=!1,(i.Code=="opening-single"||i.Code=="opening-double")&&modelList[index].PartNumberLong.split(",")[5]=="L"&&t.name.includes(`Liner${modelList[index].PartNumberLong.split(",")[3].length>1?"D":"S"}_${modelList[index].PartNumberLong.split(",")[0]=="SLP-01"?"Standard":"Junior"}`)&&(t._children[0].isVisible=!0),i.Code=="opening-single"&&(slopeData.FeaturesData[8].Layers[0]="Label_C",$(`#labelCenterSelection${index+1}`).css("display","inline-block"),$(`#labelRightSelection${index+1}`).css("display","none"),$(`#labelLeftSelection${index+1}`).css("display","none")),i.Code=="opening-double"&&($(`#labelCenterSelection${index+1}`).css("display","none"),$(`#labelRightSelection${index+1}`).css("display","inline-block"),$(`#labelLeftSelection${index+1}`).css("display","inline-block"),modelList[index].PartNumberLong.split(",")[5]!="L"&&$("#liner-option").click())):(n.Code=="jr"&&(t.name.includes("Glides")||t.name.includes("Liner")||(t._children[0].position.y=-.3),t.name.includes("Junior")&&t.name.includes(`Liner${modelList[index].PartNumberLong.split(",")[3].length>1?"D":"S"}`)&&(t._children[0].isVisible=!0),t.name.includes("Standard")&&t.name.includes("Liner")&&(t._children[0].isVisible=!1)),n.Code=="std"&&(t._children[0].position.y=0,t.name.includes("Standard")&&t.name.includes(`Liner${modelList[index].PartNumberLong.split(",")[3].length>1?"D":"S"}`)&&(t._children[0].isVisible=!0),t.name.includes("Junior")&&t.name.includes("Liner")&&(t._children[0].isVisible=!1)))});return}})})}function changeQuantity(n){nReceptacles=n;n<2&&(index=n-1);scene.activeCamera.target.x=(n-1)*-receptacleWidth/2;pdfCamera.target.x=(n-1)*-receptacleWidth/2;for(var t=0;t<modelList.length;t++)t<n?(modelList[t].setEnabled(!0),$(`.u${t+1}`).css("display","unset")):(modelList[t].setEnabled(!1),$(`.u${t+1}`).css("display","none"));index=0}function receptacleSelectorFunction(n,t){$(`.u${n}`)[0].click();index=n-1;modelList[n-1]&&$(`#pn${n}`).text(modelList[n-1].PartNumberShort);var i=$(".receptacleSelector");i.map(function(n){$("#"+i[n].id).css("background-color","rgb(210,210,210)")});i[n-1]&&t=="Label_C"?$(`#replicatedOption${n-1}`).css("background-color","rgb(150,150,150)"):i[n-1]&&$(`#replicatedOption${t=="Label_R"?"R":"L"}${n-1}`).css("background-color","rgb(150,150,150)");slopeData.FeaturesData.map(function(i){i.Code=="label"&&(i.Layers[0]=t);i.Code=="liner"&&modelList[n-1]&&$("input").prop("checked",modelList[n-1].PartNumberShort.includes("1L")||modelList[n-1].PartNumberShort.includes("2L"))})}function glidesFunction(){modelList.map(function(n,t){n.PartNumberShort;n.PartNumberLong=changePN("glides",$("input:checked").length>0?"GL":"",null,t);n._children[0]._children.map(function(n){n.name.split(".")[2].includes("Glides")&&($("input:checked").length>0?(n.name.split(".")[2]=="Glides2"&&(n._children[0].isVisible=!0),n.name.split(".")[2]=="Glides1"&&(n._children[0].isVisible=!1),$(`#glidesSelection${t}`).css("display","inline-block")):(n.name.split(".")[2]=="Glides1"&&(n._children[0].isVisible=!0),n.name.split(".")[2]=="Glides2"&&(n._children[0].isVisible=!1),$(`#glidesSelection${t}`).css("display","none")))})})}function linerFunction(){var n=["LinerD_Junior","LinerS_Junior","LinerD_Standard","LinerS_Standard"];modelList[index].PartNumberLong.split(",")[3].length>1&&modelList[index].PartNumberLong.split(",")[5]=="L"?$("#liner-option").prop("checked",!0):(modelList[index].PartNumberShort,modelList[index].PartNumberLong=changePN("liner",$("input:checked").length>0?"L":"",null,index),modelList[index]._children[0]._children.map(function(t){n.includes(t.name.split(".")[2])&&(partNumberShort[1]=="L"?t.name.split(".")[2].includes("Liner")?partNumberShort[2]=="-DBL"?t.name.split(".")[2].includes("LinerD")&&(t._children[0].isVisible=!0):t.name.split(".")[2].includes("LinerS")&&(t._children[0].isVisible=!0):t._children[0].isVisible=!1:t._children[0].isVisible=!1,partNumberShort[0]=="SLP-01"?t.name.split(".")[2].includes("Junior")&&(t._children[0].isVisible=!1):t.name.split(".")[2].includes("Standard")&&(t._children[0].isVisible=!1))}))}function changePN(n,t,i,r){partNumberLong=modelList[r].PartNumberLong.split(",");partNumberShort=[partNumberLong[0],partNumberLong[5],partNumberLong[3].length>1?"-DBL":""];switch(n){case"body":partNumberLong[0]=t;partNumberShort[0]=t;break;case"body-color":partNumberLong[1]=t;break;case"glides":partNumberLong[2]=t;break;case"opening-single":partNumberLong[3]=t;partNumberShort[2]="";break;case"opening-double":partNumberLong[3]=t;partNumberShort[2]="-DBL";break;case"opening-color":partNumberLong[4]=t;break;case"liner":partNumberLong[5]=t;partNumberShort[1]=t;break;case"label":switch(i){case 1:partNumberLong[6]=t;break;case 2:partNumberLong[7]=t;break;case 3:partNumberLong[8]=t}break;case"label-color":partNumberLong[9]=t}return $(`#pn${r+1}`).text(partNumberShort.join("")),modelList[r].PartNumberShort=partNumberShort.join(""),partNumberShort.join(""),partNumberLong.join(",")}function editSummary(n,t,i,r){switch(n){case"opening-single":$(`#openingImage${index+1}`).attr("src",i);$(`#openingText${index+1}`).text(t);break;case"opening-double":$(`#openingImage${index+1}`).attr("src",i);$(`#openingText${index+1}`).text(t);t.includes("Recycling")&&$(`#openingText${index+1}`).html(t.split("/")[0]+"/<br>"+t.split("/")[1]);break;case"label":$(`#${r}Image${index+1}`).attr("src",i);$(`#${r}Text${index+1}`).text(t);break;case"label-color":$(`#label-colorCImage${index+1}`).attr("src",i);$(`#label-colorCText${index+1}`).text(t);$(`#label-colorRImage${index+1}`).attr("src",i);$(`#label-colorRText${index+1}`).text(t);$(`#label-colorLImage${index+1}`).attr("src",i);$(`#label-colorLText${index+1}`).text(t);break;default:$(`#${n}Image${index+1}`).attr("src",i);$(`#${n}Text${index+1}`).text(t)}}function createPDFFunction(){HDRhelper.ground.isVisible=!1;$("div.configurationwrapper").addClass("print");$("div.featureoptions").addClass("print");$("#featuresContainer").css("display","none");$("#optionsContainer").css("display","none");$("#buttonsContainer").css("display","none");$(".summary-item").removeClass("carousel-item");for(var n=1;n<5;n++)nReceptacles<=n-1&&$(`#summary${n}`).css("display","none");$(".carousel-indicators").css("display","none");$("#fullscreen").css("display","none");kendo.drawing.drawDOM("#exportContainer",{paperSize:"A4",margin:{top:"2cm",bottom:"2cm",right:"0.8cm"},scale:.47,height:2480,width:3508,landscape:!0}).then(function(n){kendo.drawing.pdf.saveAs(n,"SLOPE Spec Sheet.pdf")}).then(function(){$("#featuresContainer").css("display","inline-block");$("#optionsContainer").css("display","inline-block");$("#buttonsContainer").css("display","inline-block");$("#canvasRowContainer").css("display","inline-block");$(".summary-item").addClass("carousel-item");for(var n=1;n<5;n++)$(`#summary${n}`).removeAttr("style");$(".carousel-indicators").css("display","flex");$("div.configurationwrapper").removeClass("print");$("div.featureoptions").removeClass("print");HDRhelper.ground.isVisible=!0;scene.render()})}function createImageFunction(){vPortHeight=engine._gl.drawingBufferHeight;vPortWidth=engine._gl.drawingBufferWidth;engine.setSize(1920,1080);scene.render();detectmob()?BABYLON.Tools.CreateScreenshotUsingRenderTarget(engine,scene.activeCamera,{heigth:1920,width:1080,precision:4},function(n){watermark([n,watermarkImg]).image(watermark.image.upperLeft(1)).then(function(n){var t=document.createElement("a");t.download="SLOPE.png";t.href=n.src;t.click()})}):BABYLON.Tools.CreateScreenshotUsingRenderTarget(engine,scene.activeCamera,{heigth:1920,width:1080,precision:1},function(n){watermark([n,watermarkImg]).image(watermark.image.upperLeft(1)).then(function(n){var t=document.createElement("a");t.download="SLOPE.png";t.href=n.src;t.click()})});engine.setSize(vPortWidth,vPortHeight)}function toggleFunction(){HDRhelper.ground.isVisible=!HDRhelper.ground.isVisible}function onFullScreenChange(){document.fullscreen!==undefined?isFullScreen=document.fullscreen:document.mozFullScreen!==undefined?isFullScreen=document.mozFullScreen:document.webkitIsFullScreen!==undefined?isFullScreen=document.webkitIsFullScreen:document.msIsFullScreen!==undefined&&(isFullScreen=document.msIsFullScreen);document.fullscreen||$("#fullscreenIcon").attr("d","M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z")}var slopeData={Id:1,Code:"Slope",PartNumber:"SLP-01",DefaultLayers:["Standard","Top_W","Label_C","LinerS_Standard","Glides1"],FeaturesData:[{Id:1,Code:"quantity",Label:"Quantity",Description:"Please select the number of SLOPE units you would like to configure.",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/plusminus.jpg",Options:[{Id:1,Code:"1",Label:"1 Unit",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-1.jpg",Active:!0},{Id:2,Code:"2",Label:"2 Units",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-2.jpg",Active:!1},{Id:3,Code:"3",Label:"3 Units",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-3.jpg",Active:!1},{Id:4,Code:"4",Label:"4 Units",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-4.jpg",Active:!1}]},{Id:1,Code:"glides",Label:"Add a set of 4 adjustable glides to all my SLOPE units",Description:null,Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",Options:[{Id:1,Code:"glides",Label:null,Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",PartNumber:"GL",Active:!1},{Id:2,Code:"no-glides",Label:null,Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",PartNumber:"",Active:!0}]},{Id:2,Code:"body",Label:"Body",Description:"Please select the body type & finish of your SLOPE configuration.",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-1.jpg",Layers:["Junior","Standard"],Options:[{Id:1,Code:"std",Label:"Standard Height",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-1.jpg",PartNumber:"SLP-01",Layers:["Standard"],Active:!0},{Id:2,Code:"jr",Label:"Junior Height",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-1s.jpg",PartNumber:"SLP-02",Layers:["Junior"],Active:!1}]},{Id:2,Code:"body-color",Label:"",Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",Layers:["Junior","JuniorL","Standard","StandardL"],Options:[{Id:1,Code:"anodizedSilver",Label:"Anodized Silver",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/anodized-silver-slope-body_color.jpg",PartNumber:"AS",ColorCode:"#404040",Active:!1},{Id:2,Code:"darkAnthracite",Label:"Dark Anthracite",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/dark-anthracite-slope-top_body_color.jpg",PartNumber:"DA",ColorCode:"#191A1A",Active:!1},{Id:3,Code:"lunarWhite",Label:"Lunar White",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/lunar-white-slope-body_color.jpg",PartNumber:"LW",ColorCode:"#FFFFFF",Active:!1},{Id:4,Code:"brushedSS",Label:"Brushed Stainless Steel",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/brushed-stainless-steal-slope-color_body_color.jpg",PartNumber:"BSS",Material:[{AlbedoTexture:!0,NormalTexture:!0}],Active:!0},]},{Id:3,Code:"opening-single",Label:"Opening",Description:"Please select a single or double top opening, top finish color and internal rigid liner.",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening.jpg",Layers:["Top_P","Top_R","Top_W","Top_RP","Top_RR","Top_WP","Top_WR","Top_WW","Label_L","Label_R","Label_C","LinerD_Standard","LinerD_Junior","LinerS_Standard","LinerS_Junior"],Options:[{Id:1,Code:"opening-waste",Label:"Waste",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-square.jpg",PartNumber:"W",Layers:["Top_W","Label_C"],Active:!0},{Id:2,Code:"opening-paper",Label:"Paper",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-paper.jpg",PartNumber:"P",Layers:["Top_P","Label_C"],Active:!1},{Id:3,Code:"opening-recycling",Label:"Recycling",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-oval.jpg",PartNumber:"R",Layers:["Top_R","Label_C"],Active:!1},]},{Id:3,Code:"opening-double",Label:"Opening",Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",Layers:["Top_P","Top_R","Top_W","Top_RP","Top_RR","To_WP","Top_WR","Top_WW","Top_WP","Label_C","Label_R","Label_L","LinerS_Standard","LinerS_Junior","LinerD_Standard","LinerD_Junior"],Options:[{Id:1,Code:"opening-waste-waste",Label:"Waste / Waste",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-double-square.jpg",PartNumber:"WW",Layers:["Top_WW","Label_L","Label_R"],Active:!1},{Id:2,Code:"opening-waste-recycling",Label:"Waste / Recycling",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-double-square-oval.jpg",PartNumber:"WR",Layers:["Top_WR","Label_L","Label_R"],Active:!1},{Id:3,Code:"opening-waste-paper",Label:"Waste / Paper",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-double-square-paper.jpg",PartNumber:"WP",Layers:["Top_WP","Label_L","Label_R"],Active:!1},{Id:4,Code:"opening-recycling-recycling",Label:"Recycling / Recycling",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-double-oval.jpg",PartNumber:"RR",Layers:["Top_RR","Label_L","Label_R"],Active:!1},{Id:5,Code:"opening-recycling-paper",Label:"Recycling / Paper",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/opening-double-oval-paper.jpg",PartNumber:"RP",Layers:["Top_RP","Label_L","Label_R"],Active:!1},]},{Id:3,Code:"opening-color",Label:"",Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",Layers:["Top_P","Top_R","Top_W","Top_RP","Top_RR","Top_WP","Top_WR","Top_WW"],Options:[{Id:1,Code:"anodizedSilver",Label:"Anodized Silver",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/anodized-silver-slope-body_color.jpg",PartNumber:"AS",ColorCode:"#2E2E2E",Active:!1},{Id:2,Code:"darkAnthracite",Label:"Dark Anthracite",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/dark-anthracite-slope-top_body_color.jpg",PartNumber:"DA",ColorCode:"#141515",Active:!1},{Id:3,Code:"lunarWhite",Label:"Lunar White",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/lunar-white-slope-body_color.jpg",PartNumber:"LW",ColorCode:"#FFFFFF",Active:!1},{Id:4,Code:"capriBlue",Label:"Capri Blue",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/capri-blue-slope-color-top_color_finish.jpg",PartNumber:"CB",ColorCode:"#000F24",Active:!1},{Id:5,Code:"copperBrown",Label:"Copper Brown",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/copper-brown-slope-top_color_finish.jpg",PartNumber:"CB",ColorCode:"#190500",Active:!1},{Id:6,Code:"fernGreen",Label:"Fern Green",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/fern-green-ral-6025-slope-color_options_large.jpg",PartNumber:"FG",ColorCode:"#081703",Active:!1},{Id:7,Code:"polishedSS",Label:"Polished Stainless Steel",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/polished-stainless-steal-slope-color-options.jpg",PartNumber:"SS",Material:[{AlbedoTexture:!0,NormalTexture:!0}],Active:!0},]},{Id:3,Code:"liner",Label:"Include internal rigid liner for this unit.<br>*Note SLOPE double top opening units require internal rigid liners.",Description:null,Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",Options:[{Id:1,Code:"liner",Label:null,PartNumber:"L",Active:!1},{Id:2,Code:"no-liner",Label:null,PartNumber:"",Active:!0}]},{Id:4,Code:"label",Label:"Label",Description:"Please select vinyl label design & finish color for each unit.",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-recycling.jpg",Layers:["Label_C"],Options:[{Id:1,Code:"label-waste",Label:"Waste",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-waste.jpg",PartNumber:"W",Material:[{AlbedoTexture:!0}],Active:!0},{Id:2,Code:"label-paper",Label:"Paper",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-paper.jpg",PartNumber:"P",Material:[{AlbedoTexture:!0}],Active:!1},{Id:3,Code:"label-recycling",Label:"Recycling",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-recycling.jpg",PartNumber:"R",Material:[{AlbedoTexture:!0}],Active:!1},{Id:4,Code:"label-cans",Label:"Cans",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-cans.jpg",PartNumber:"C",Material:[{AlbedoTexture:!0}],Active:!1},{Id:5,Code:"label-plastic",Label:"Plastic",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-plastic.jpg",PartNumber:"PL",Material:[{AlbedoTexture:!0}],Active:!1},{Id:6,Code:"label-glass",Label:"Glass",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-glass.jpg",PartNumber:"G",Material:[{AlbedoTexture:!0}],Active:!1},{Id:7,Code:"label-organics",Label:"Organics",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-organics.jpg",PartNumber:"O",Material:[{AlbedoTexture:!0}],Active:!1},{Id:8,Code:"label-landfill",Label:"Landfill",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-landfill.jpg",PartNumber:"L",Material:[{AlbedoTexture:!0}],Active:!1},{Id:9,Code:"label-compost",Label:"Compost",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/slope-label-compost.jpg",PartNumber:"C",Material:[{AlbedoTexture:!0}],Active:!1},{Id:10,Code:"no-label",Label:"No Label",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/white-vinyl-label-color.jpg",PartNumber:"N",Material:[{AlbedoTexture:!0}],Active:!1}]},{Id:4,Code:"label-color",Label:"",Thumbnail:"http://files.magnusongroup.com/sitedocs/configurator/Umea-None.jpg",Layers:["Label_C","Label_R","Label_L"],Options:[{Id:1,Code:"darkGreyVinyl",Label:"Dark Grey Vinyl",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/dark-grey-vinyl-label-color.jpg",PartNumber:"DGV",ColorCode:"#080808",Layers:["Label_C","Label_R","Label_L"],Active:!0},{Id:2,Code:"whiteVinyl",Label:"White Vinyl",Thumbnail:"https://magnuson.blob.core.windows.net/sitedocs/configurator/slope/white-vinyl-label-color.jpg",PartNumber:"WV",ColorCode:"#F5F5F5",Layers:["Label_C","Label_R","Label_L"],Active:!1},]},]},canvas=document.getElementById("magnusonCanvas"),container=document.getElementById("magnusonRowContainer"),engine=new BABYLON.Engine(canvas,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0}),pdfCamera,modelCore,modelList=[],HDRhelper,GLTFExportOptions,spotLight,spotLight2,index=0,nReceptacles=1,isDouble=!1,cycle=!1,nFeature=0,receptacleWidth=43,partNumberLong=["SLP-01","LW","","P","AS","L","W","W","W","WV"],partNumberShort=[partNumberLong[0],partNumberLong[5],""],createScene,scene,featuresData,$featuresList,$featuresHeader,$optionsClass,previousFeatureId,buildIt,$feature,$featureImageClass,$featureImage,$featureText,watermarkImg,devMode,renderingZone,isFullScreen;for(BABYLON.ArcRotateCamera.prototype.spinTo=function(n,t,i){var r=new BABYLON.CubicEase;r.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);BABYLON.Animation.CreateAndStartAnimation("at4",this,n,i,120,this[n],t,0,r)},createScene=function(){var n=new BABYLON.Scene(engine),t=new BABYLON.ArcRotateCamera("Camera",.4*Math.PI,6*Math.PI/16,250,new BABYLON.Vector3(0,60,0),n),u=new BABYLON.HemisphericLight("HemiLight",new BABYLON.Vector3(0,1,.2),n),r,i;return u.intensity=5,spotLight=new BABYLON.DirectionalLight("light1",new BABYLON.Vector3(-.43,-.85,-.3),n),spotLight.intensity=10,spotLight.position.y=150,spotLight2=new BABYLON.DirectionalLight("light2",new BABYLON.Vector3(-.43,-.85,-.3),n),spotLight2.intensity=0,spotLight2.position.y=150,detectmob()&&(r=new BABYLON.ShadowGenerator(512,spotLight),r.usePoissonSampling=!0,r.bias=.0002,i=new BABYLON.ShadowGenerator(512,spotLight2),i.useBlurExponentialShadowMap=!0,i.blurBoxOffset=19,i.depthScale=3,i.blurScale=2),t.wheelDeltaPercentage=.07,t.attachControl(canvas,!1),t.lowerRadiusLimit=80,t.upperRadiusLimit=350,t.panningSensibility=20,pdfCamera=t.clone(),pdfCamera.alpha=Math.PI/2,pdfCamera.radius=180,pdfCamera.beta=7*Math.PI/16,n.clearColor=new BABYLON.Color3(1,1,1),BABYLON.SceneLoader.ImportMesh("","assets/models/","slope.glb",n,function(t){var u,f;for(modelCore=t,modelCore.map(function(t,i){i>0&&(t.actionManager=new BABYLON.ActionManager(n),t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(){},!1)),t.isVisible=slopeData.DefaultLayers.includes(t.name))}),u=0;u<4;u++){for(modelList[u]=modelCore[0].clone("slope"+u),f=0;f<modelList[u]._children[0]._children.length;f++)modelList[u]._children[0]._children[f]._children[0].material=modelCore[f+1].material.clone(modelCore[f+1].name+"_slope_"+u),modelList[u]._children[0]._children[f]._children[0].material._metallicTexture=null,modelList[u]._children[0]._children[f].name.includes("Top"),modelList[u]._children[0]._children[f]._children[0].material.useRadianceOcclusion=!1,modelList[u]._children[0]._children[f]._children[0].material._roughness=.11,modelList[u]._children[0]._children[f]._children[0].material._metallic=.4,modelList[u]._children[0]._children[f]._children[0].material.metallicF0Factor=0,modelList[u]._children[0]._children[f]._children[0].material.directIntensity=.5,index=u,changeColor("opening-color","anodizedSilver"),detectmob()&&(r.addShadowCaster(modelList[u]._children[0]._children[f]._children[0]),i.addShadowCaster(modelList[u]._children[0]._children[f]._children[0]),modelList[u]._children[0]._children[f]._children[0].receiveShadows=!0);index=0;modelList[u]._position.x=-u*receptacleWidth;modelList[u].setEnabled(!1);modelList[u].PartNumberLong=partNumberLong.join(",");modelList[u].PartNumberShort=partNumberShort.join("")}modelCore.map(function(n){n.isVisible=!1});modelList[0].setEnabled(!0)},function(n){if(n.lengthComputable){var t=(n.loaded*100/n.total).toFixed();$(".progress-bar").css("width",t+"%");$("#loadingLabel").text(t+"%");t>=100&&($(".progress")[0].remove(),$("#loadingLabel").remove())}else dlCount=n.loaded/1048576},function(){}),HDRhelper=n.createDefaultEnvironment({cameraExposure:1.2,cameraContrast:1.2,createSkybox:!1,skyboxSize:300,groundSize:700,groundColor:new BABYLON.Color3(1,1,1),groundOpacity:.25}),spotLight.excludedMeshes.push(HDRhelper.ground),HDRhelper.ground.receiveShadows=!0,n.environmentIntensity=.25,window.addEventListener("resize",function(){engine.resize()}),n},scene=createScene(),engine.runRenderLoop(function(){window.addEventListener("resize",function(){engine.resize()});scene.render()}),featuresData=slopeData.FeaturesData,$featuresList=$("<div>",{"class":"list-group",id:"featuresList"}),$("#featuresChoice").append($featuresList),$featuresHeader=$("<h1>",{style:"position: relative; margin: 0 auto; padding: 0; border: 0; width: auto; clear: both; text-align: center; font-size: 18px; font-weight: 400; margin-bottom: 20px; display: inline-block; color: rgb(0,0,0); line-height: 26px; vertical-align: text-top; border-bottom: solid 2px rgb(240,240,240); text-decoration: none; text-transform: uppercase; letter-spacing: 1px; display: none;",text:"Select Options"}),$featuresList.append($featuresHeader),$optionsClass=$('<div class="options">'),$featuresList.append($optionsClass),previousFeatureId="",buildIt=!0,nFeatures=0;nFeatures<featuresData.length;nFeatures++)nFeatures>0&&previousFeatureId==featuresData[nFeatures].Id&&(buildIt=!1),buildIt&&($feature=$("<div>",{"class":"option",id:"feature-"+featuresData[nFeatures].Code,onClick:'optionsCreation("'+nFeatures+","+featuresData[nFeatures].Id+'")'}),$optionsClass.append($feature),$featureImageClass=$("<div>",{"class":"image"}),$feature.append($featureImageClass),$featureImage=$("<img>",{src:featuresData[nFeatures].Thumbnail,border:"0",alt:"Slope","class":"fade-img",style:""}),$featureImageClass.append($featureImage),$featureText=$("<div>",{text:featuresData[nFeatures].Label,"class":"text"}),$feature.append($featureText)),previousFeatureId=featuresData[nFeatures].Id,buildIt=!0;optionsCreation("0,1");watermarkImg=new Image;watermarkImg.crossOrigin="anonymous";watermarkImg.src=detectmob()?"/assets/layout/wm-logo_real.png":"/assets/layout/wm-logo-mobile.png";$("#slider1").on("input change",function(){HDRhelper.ground.material.alpha=$("#slider1").val();$(".valueSpan").html($("#slider1").val())});$(document).ready(function(){$("#summaryCarousel").carousel();$(".u1").click(function(){$("#summaryCarousel").carousel(0)});$(".u2").click(function(){$("#summaryCarousel").carousel(1)});$(".u3").click(function(){$("#summaryCarousel").carousel(2)});$(".u4").click(function(){$("#summaryCarousel").carousel(3)})});devMode=0;$("body").keypress(function(n){n.which==100&&devMode<21&&devMode++;devMode==10&&scene.debugLayer.show();devMode==20&&(console.log(String.fromCharCode(66,121,32,122,114,101,108,105,99,107,64,103,109,97,105,108,46,99,111,109)),$("#inspector-host").css("position","fixed","z-index","500"),$("#inspector-host").css("z-index","500"),$("#scene-explorer-host").css("position","fixed","z-index","500"),$("#scene-explorer-host").css("z-index","500"))});renderingZone=document.getElementById("canvasRowContainer");isFullScreen=!1;document.addEventListener("fullscreenchange",onFullScreenChange,!1);document.addEventListener("mozfullscreenchange",onFullScreenChange,!1);document.addEventListener("webkitfullscreenchange",onFullScreenChange,!1);document.addEventListener("msfullscreenchange",onFullScreenChange,!1);switchFullscreen=function(){isFullScreen?(BABYLON.Tools.ExitFullscreen(),$("#fullscreenIcon").attr("d","M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z")):(engine.enterFullscreen(),$("#fullscreenIcon").attr("d","M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"))};